# redis分布式锁的问题或讲讲redis的分布式锁
  实现分布式锁需要实现的两个基本方法:
  - 获取锁  setnx lock thread1 
  - 释放锁  
    - 手动释放: del lock
    - 超时释放: 给锁设置一个过期时间

  我们为锁加一个过期时间是因为redis实现分布式锁本质上是通过setnx这样一个设置key的互斥命令,但是如果我们当前一个线程在拿到分布式锁后,突然宕机了,这就出现了问题,因为我们已经设置了一个key,
宕机时却并没有办法把这个key进行释放,那么之后其他线程试图setnx key时就会发现失败,但其实此时没有其他线程持有锁,为了应对这个问题我们可以在setnx后,对该key设置一个过期时间,这样即使日后
redis宕机,该key也不会始终存在,而是会在一段时间后过期,这样其他线程就可以重新持有该分布式锁了;