# 经典面试题————为什么redis集群的最大槽数是16384
  CRC16算法产生的hash值有16bit,即该算法可以产生2^16=65536个值
  换句话说,值是分布在0~65535之间,那为什么又更大的65536不用,而选择2^14,16384呢？
  - 第一,redis底层是用C写的,在集群中,每秒钟redis节点需要发送一定数量的ping消息作为心跳包,这个ping包主要的空间消耗来自myslots字段,而该字段是一个数组,其大小为CLUSTER_SLOT/8,
  那如果槽位为65536,这个字段将是65536/8/1024=8kb,进一步说这个心跳包的ping消息的消息头达到8kb,确实太大了,而如果是16384,则心跳包的消息头只要2kb;
  - 第二,集群节点越多,心跳包的消息体内携带的数据越多,如果节点超过1000个,也会导致网络拥堵;因此redis作者不建议redis cluster节点数量超过1000个;那么,对于节点数在1000以内的redis
    集群,16384个槽位够用了,没必要拓展到65536;
  - 第三,也是最重要的一点,Redis集群中各个主节点的所负责的哈希槽的槽位信息是通过bitmap保存的,每个主节点维护各自的bitmap,那么当我们查一条数据时,需要根据key进行一次哈希,看其属于哪个
    哈希槽,再通过位图查找该哈希值是否在自己维护的位图上,如果没有就会向其他主节点索要其位图,位图会压缩传递过来,在逐一位图进行判断,最终确定数据存在哪个节点;那在这个过程中,多个节点之间
    通信时位图要进行压缩传输,那65535更多的数据,压缩传输的性能损耗也就越多了;那么在16384个插槽已经可以满足要求的情况下,也就没必要非图大,使用65535;
  - 总结,就是16384完全够用了