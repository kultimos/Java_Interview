# 类加载的流程

- 类加载中有三个阶段
    - 加载
      加载阶段是指将字节码从不同的数据源(可能是class文件、也可能是jar包,甚至网络)转化为二进制字节流加载到内存中,并生成一个代表该类的java.lang.Class对象
    - 连接
      连接中又分为三个阶段
        - 验证:
          文件格式验证、元数据验证、字节码验证和符号引用验证,来确保加载的类符合Java虚拟机规范,不会造成安全漏洞;这一步有些类似编译检查;
        - 准备
          为类的静态变量分配内存,并根据静态变量的数据类型,设置默认初始值;静态常量会在准备阶段赋初值,而不是初始化阶段;
        - 解析
          JVM将类中的符号引用转换为直接引用,符号引用包括类和接口、字段、方法等;(其实就是当我们的类被加载进内存后,很多类的静态变量都有了自己的内存地址,就可以将一些符号引用具体化)
    - 初始化
      静态变量赋初值,静态代码块执行,构造器执行,这是类加载的最后阶段

  类加载结束后,方法区中就会有对应类的字节码的二进制数据,同时堆中会生成字节码文件对应的数据结构,即类的Class对象