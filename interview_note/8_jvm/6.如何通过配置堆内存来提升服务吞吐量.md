# 如何通过合理配置堆内存来提升服务吞吐量

  ## 增加堆内存确实可以增加服务的吞吐量
  - 因为提升内存,就是变向减少了FullGC的次数,所以性能会更好,吞吐量更高

  ## 按照官方给出的原则,合理配置堆内存大小
  - Java整个堆的大小,Xms和Xmx应设置为老年代进行FullGC后存活的对象所占内存的3~4倍
  - 方法区(永久代或元空间)的内存大小应该设置为老年代进行FullGC后存活的对象所占的内存的1.2~1.5倍
  - 年轻代的Xmn的内存大小应该设置为老年代进行FullGC后存活的对象所占的内存的1~1.5倍

  ## 如何获悉老年代进行FullGC后存活对象的内存大小呢
  - 观察GC日志,根据多次FullGC之后的内存大小取平均值
  - 通过VisualVM、JConsole手动触发FullGC,然后观察老年代存活对象占据内存大小