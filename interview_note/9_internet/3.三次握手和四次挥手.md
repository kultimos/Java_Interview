# 三次握手和四次挥手
  三次握手是建立连接的过程,当客户端向服务端发起连接时,
  会先发一包连接请求数据即SYN包,用于请求建立连接
  如果对端同意建立连接则回复一个SYN+ACK包
  客户端收到之后再发送一个ACK包
  至此,连接建立
  因为过程中互相发送了三次数据包,所以TCP建立连接的过程又称三次握手

  处于连接状态的服务端和客户端都可以进行关闭连接请求,此时需要四次挥手来进行连接关闭
  客户端发起连接关闭请求,需要向服务端发送一包FIN包,自己则进入中止等待1状态 FIN-WAIT-1,这是第一次挥手
  服务端接收到FIN包,发送一包ACK包表示自己进入了关闭等待状态CLOSE-WAIT,这是第二次挥手
  客户端接收到ACK包后进入中止等待2状态 FIN-WAIT-2
  服务端此时还可以发送未发送的数据,而客户端还可以接收数据,
  服务端发送完所有数据后,会发送一包FIN包并进入最后确认状态LAST-ACK,这是第三次挥手
  客户端收到FIN包之后会回复对端一个ACK包,并进入超时等待状态TIME-WAIT,客户端在经过超时时间后就会关闭连接,这是第四次挥手
  而服务端在收到ACK包后就会立刻关闭连接
  整个过程共计发送了四次数据包,所以也称断开连接的过程为四次挥手 

# 经过三次握手后,两端都进入了数据传输状态,此时有几个问题需要面对,一包数据可能会被拆成多包发送,如何处理丢包问题?这些数据包到达的先后顺序不同,如何处理乱序问题?
  TCP协议为每一个连接建立了发送缓冲区,建立连接后的第一个字节的序列号为0,后面每个字节的序列号都会+1,发送数据时,从发送缓冲区取一部分数据组成发送报文,
在报文的协议头中会附带序列号和长度,接收端接收到数据后,需要回复确认报文,确认报文中的ack包中记录了下一包数据需要发送的起始序列号,这样一问一答的方式能够
使发送端确认发送的数据已经被对方接收;并且针对乱序的问题,接收端可以自己根据数据的序列号和长度重构出完整的数据;
  假设过程中丢失了某些数据包,接收端可以要求发送端重传对应序列号的数据,发送端在收到后就会重传这一个数据包,接收端进行补齐;
  通过以上的机制就可以保证数据的丢包、乱序等问题;

# 为什么客户端需要等待超时时间后才会关闭连接?
  这是为了保证对方接收到ACK包,因为假设客户端发送完最后一个ACK包后立即释放连接,一旦ACK包在网络中丢失,服务端将一直停留在最后确认状态
如果客户端发送最后一包ACK包后等待一段时间,这时服务端因为没有收到ACK包会重发FIN包,客户端呢也就会响应的响应这个新的FIN包,并且重发ACK包,
同时刷新超时时间