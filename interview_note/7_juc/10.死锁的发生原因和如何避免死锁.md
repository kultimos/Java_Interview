# 死锁的发生原因和如何避免死锁
  死锁的发生原因
    两个或两个以上的线程在执行的过程中去争夺同样一个共享资源造成的相互等待的现象,如果没有外部的干预,线程会一直阻塞,这样一直处于相互等待资源的线程,我们称为死锁线程;

  导致死锁的条件有四个,即这四个条件同时满足时,就会产生死锁:
  - 互斥条件,共享资源X和Y只能被一个线程占用   (无法破坏)
  - 请求和保持条件,线程1已经取得共享资源X,在等待共享资源Y时,不释放共享资源X
  - 不可抢占条件,其他线程不得抢占线程1占用的资源
  - 循环等待条件,线程1等待线程2占用的资源,线程2等待线程1占用的资源,这就是循环等待;\

  那么如何避免死锁呢,其实我们破坏上述导致死锁条件
    那除了互斥条件无法破坏外,其他条件我们均可以在写代码时进行破坏
    比如请求和保持条件,我们可以一次性申请所有资源,这样就可以避免等待
    对于不可抢占条件,对于已经占用部分资源的线程去进一步申请其他资源时,如果申请不到,我们可以主动释放其占用的资源来避免死锁
    对于循环等待条件,我们可以通过按序申请资源来预防,所谓按序申请资源是指资源是有线型顺序的,申请时可以先申请资源序号小的,然后再去申请资源序号大的,这样线性化之后自然就不存在循环等待的问题了;