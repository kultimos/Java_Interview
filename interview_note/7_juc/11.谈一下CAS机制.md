# 谈一下CAS机制
  全程CompareAndSwap,比较并交换,主要功能是用于保证在多线程环境下对共享变量修改的原子性;
  CAS在使用过程中一个问题就是ABA问题,ABA问题是指在并发环境,一个线程读取某个位置的值A,打算在这个位置写入一个新值B,但在实际操作前,另一个线程将该位置的值从A改为C,然后又改回A;
这时,第一个线程进行CAS操作时,发现位置的值仍然为A,于是它错误地认为这个位置的值没有被其他线程修改过,进而成功地将值改为B;这就可能导致逻辑上的错误,因为实际上这个位置的值已经被另一个线程修改过了;
  要解决ABA问题,一种常见的方法是使用带版本号的CAS,即在每个值旁边维护一个版本号;每次操作时,不仅比较值是否相等,还比较版本号是否一致,只有两者都匹配才进行操作,并在操作成功时更新版本号;
这样即便是值从A变到C再变回A,版本号也会发生变化,从而避免了ABA问题