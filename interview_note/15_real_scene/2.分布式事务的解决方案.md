# 分布式事务的解决方案
  - 在单体项目中,如果整合了Spring,就可以通过@Transactional注解就可以解决;但对于分布式系统的数据一致性,则需要一些分布式事务解决方案

  ## 2PC
  - 依赖于数据库层面来完成分布式事务
  - 分为两个步骤来完成分布式事务
    - 首先需要理解角色的划分,在我们的微服务架构中,我们将服务称之为事务的参与者,通常我们还需要一个事务协调者
      - 第一个阶段————准备阶段:协调者会向所有参与者(即涉及事务的各个微服务)发送准备请求,询问它们是否准备好提交事务;参与者接收到该通知后,会开启
      各自的事务,进行各自的业务操作,将事务写入日志,但不提交事务,然后会阻塞住,向协调者返回就绪或未就绪的响应;
      - 第二个阶段————提交阶段:如果所有参与者都返回准备就绪的响应,协调者向所有参与者发送提交请求,要求它们提交事务;如果任何参与者返回未就绪的响应,
      或者协调者在一定时间内没有接收到所有参与者的响应,响应者都会向所有参与者发送回滚请求,要求它们回滚事务

  ## 3PC
  - 在2PC的基础上,多了一个询问阶段
  - 第一阶段————canCommit询问阶段:事务协调者会询问所有事务参与者,是否可用
  - 后续两阶段等同2PC
  